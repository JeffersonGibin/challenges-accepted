(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(49)},23:function(e,t,a){},25:function(e,t,a){},27:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){e.exports=a.p+"static/media/icon-low.4c0f8edd.svg"},34:function(e,t,a){e.exports=a.p+"static/media/icon-high.2191c1b5.svg"},35:function(e,t,a){},38:function(e,t,a){e.exports=a.p+"static/media/icon-search.87a42f03.svg"},39:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){e.exports=a.p+"static/media/icon-heart.e22f6384.svg"},48:function(e,t,a){e.exports=a.p+"static/media/favicon.59368f90.ico"},49:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(15),l=a.n(c),i=a(7),s=a(8),o=a(11),u=a(9),m=a(12),d=a(5),h=a(51),f=a(52),p=a(16),E=a.n(p);var y=function(e){return Math.round(5/9*(e-32))};var b=function(e){e=Array.isArray(e)?e:[e];var t='text="'.concat(e.join('" or text="'),'"'),a="select woeid from geo.places(1) where ".concat(t),r="select * from weather.forecast where woeid in (".concat(a,") and u='c'");return"https://query.yahooapis.com/v1/public/yql?q=".concat(r,"&format=json")},w=function(e){return{city:e.location.city,region:e.location.region,country:e.location.country,forecastList:e.item.forecast.map(function(e){return e.high=Number(e.high),e.low=Number(e.low),e}),currentTemperature:Number(e.item.condition.temp),currentConditionText:e.item.condition.text,windSpeed:Math.round(e.wind.speed),windChill:y(e.wind.chill),humidity:Number(e.atmosphere.humidity)}},g={getForecast:function(e){return new Promise(function(t,a){fetch(b(e)).then(function(e){return e.json()}).then(function(e){if(!e||!e.query||!e.query.count)return t(null);var a=e.query.results.channel;return(Array.isArray(a)?a:[a]).map(w)}).then(t).catch(a)})},mountUrl:b},v=(a(23),a(25),function(e){return n.a.createElement("div",{className:"error-message"},e.message)}),_=(a(27),function(){return n.a.createElement("header",{className:"header"},n.a.createElement("h1",{className:"header__title"},"Weather forecast"))}),N=a(1),C=(Object(N.shape)({city:N.string.isRequired,region:N.string.isRequired,country:N.string.isRequired,forecastList:Object(N.arrayOf)(Object(N.shape)({day:N.string.isRequired,high:N.number.isRequired,low:N.number.isRequired,text:N.string.isRequired})).isRequired,currentTemperature:N.number.isRequired,currentConditionText:N.string.isRequired,windSpeed:N.number.isRequired,windChill:N.number.isRequired,humidity:N.number.isRequired}),a(4)),k=a.n(C),j={SUN:"Sunday",MON:"Monday",TUE:"Tuesday",WED:"Wednesday",THU:"Thursday",FRI:"Friday",SAT:"Saturday"};var O=function(e){return j[e.toUpperCase()]||null},q=(a(31),a(33)),F=a(34),S=function(e){var t=e.forecast,a=e.onClickClose;t=t||{};var r=Boolean(t.city),c=r?t.forecastList[0]:null,l=r?t.forecastList.slice(1,6):null;return n.a.createElement("section",{className:"weather-card"},n.a.createElement(C.SkeletonTheme,{color:"#F1D5B2",highlightColor:""},n.a.createElement("div",{className:"weather-card__close",title:"Close",onClick:a},"x"),n.a.createElement("div",{className:"weather-card__body"},n.a.createElement("div",{className:"weather-card__city app__skeleton"},r?n.a.createElement("span",null,t.city,", ",t.region," - ",t.country):n.a.createElement(k.a,{width:250})),n.a.createElement("h2",{className:"weather-card__temperature"},r?"".concat(t.currentTemperature,"\xbaC"):n.a.createElement(k.a,null),"\xa0\xa0",n.a.createElement("span",{title:r?t.currentConditionText:""},r?t.currentConditionText:n.a.createElement(k.a,null))),n.a.createElement("table",{className:"weather-card__now"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",{className:"weather-card__now__first-column"},r?n.a.createElement("img",{src:q,width:"12",height:"12",alt:"Low"}):"",r?n.a.createElement("b",null,c.low,"\xba"):n.a.createElement(k.a,{width:45}),"\xa0\xa0\xa0",r?n.a.createElement("img",{src:F,width:"12",height:"12",alt:"High"}):"",r?n.a.createElement("b",null,c.high,"\xba"):n.a.createElement(k.a,{width:45})),n.a.createElement("td",null,r?n.a.createElement("span",null,"Wind chill ",n.a.createElement("b",null,t.windChill,"\xbaC")):n.a.createElement(k.a,{width:120}))),n.a.createElement("tr",null,n.a.createElement("td",null,r?n.a.createElement("span",null,"Wind ",n.a.createElement("b",null,t.windSpeed,"km/h")):n.a.createElement(k.a,{width:100})),n.a.createElement("td",null,r?n.a.createElement("span",null,"Humidity ",n.a.createElement("b",null,t.humidity,"%")):n.a.createElement(k.a,{width:120})))))),n.a.createElement("table",{className:"weather-card__footer"},n.a.createElement("tbody",null,n.a.createElement("tr",null,r?l.map(function(e,t){return n.a.createElement("td",{className:"weather-card__weekday",key:t,"data-order":t},n.a.createElement("div",null,O(e.day)),n.a.createElement("div",{className:"weather-card__weekdays__temp"},e.low,"\xba\xa0\xa0",e.high,"\xba"))}):n.a.createElement("td",null,n.a.createElement(k.a,{height:42})))))))},x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={forecast:null,error:null},a.closeWeatherCard=a.closeWeatherCard.bind(Object(d.a)(Object(d.a)(a))),a.loadForecast=a.loadForecast.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.loadForecast()}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.state.forecast&&e.city===this.state.forecast.city,r=t.forecast===this.state.forecast;return!a||!r}},{key:"componentDidUpdate",value:function(e,t){e.city!==this.props.city&&this.loadForecast()}},{key:"closeWeatherCard",value:function(){this.setState({forecast:null})}},{key:"loadForecast",value:function(){var e=this;this.setState({forecast:null,error:null});var t=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({forecast:t,error:a})};g.getForecast(this.props.city).then(function(e){e?t(e[0]):t(null,"City not found")}).catch(function(e){return t(null,"Error: could not load weather card data.\n(".concat(e.toString(),")"))})}},{key:"render",value:function(){return this.state.error?n.a.createElement(v,{message:this.state.error}):n.a.createElement(S,{forecast:this.state.forecast,onClickClose:this.closeWeatherCard})}}]),t}(n.a.Component),R=(a(35),function(){var e="";function t(t){e=t.target.value}return n.a.createElement(f.a,{render:function(r){var c=r.history;return n.a.createElement("section",{className:"search-bar"},n.a.createElement("form",{className:"search-bar__form",onSubmit:function(t){return function(t,a){t.preventDefault(),e.length&&a.push("/city/"+e)}(t,c)}},n.a.createElement("input",{className:"search-bar__input",type:"search",placeholder:"Search a city",pattern:".*\\S.*",title:"Must contain at least one non-empty character.",required:!0,autoFocus:!0,defaultValue:e,onChange:t}),n.a.createElement("button",{className:"search-bar__submit",type:"submit",title:"Search"},n.a.createElement("img",{src:a(38),width:"22",height:"22",alt:"Search"}))))}})});var T=function(e){return{firstChunk:(e=Array.isArray(e)?e:[]).slice(0,e.length/2),secondChunk:e.slice(e.length/2)}},M=(a(39),a(41),a(50)),W=(a(43),function(e){var t=e.city;return n.a.createElement(M.a,{className:"city__link",to:"".concat("/challenges-accepted/challenges/weather-forecast/app/build","/city/").concat(t)},t)}),A=function(e){var t=e.forecast;return n.a.createElement("tr",null,n.a.createElement("td",{className:"capitals-column__temperature"},t.forecastList[0].low,"\xba"),n.a.createElement("td",{className:"capitals-column__temperature"},t.forecastList[0].high,"\xba"),n.a.createElement("td",null,n.a.createElement(W,{city:t.city})))},L=function(e){var t=e.order,a=e.forecasts;return n.a.createElement("div",{className:"capitals__column-wrapper","data-order":t},n.a.createElement("table",{className:"capitals__table",border:"0"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{className:"capitals-column__temperature"},"Min"),n.a.createElement("th",{className:"capitals-column__temperature"},"Max"),n.a.createElement("th",null))),n.a.createElement("tbody",null,a.map(function(e,t){return n.a.createElement(A,{key:t,forecast:e})}))))};L.defaultProps={order:1};var D=L,U=(a(45),function(){return n.a.createElement("div",{className:"author"},"Made with",n.a.createElement("img",{className:"author-heart",src:a(47),alt:"Heart",width:"16",height:"16"}),"by ",n.a.createElement("a",{className:"author-link",href:"https://blog.andersonmamede.com.br/"},"Anderson Mamede"))}),B=function(e){var t=e.forecasts,a=T(t),r=a.firstChunk,c=a.secondChunk;return n.a.createElement("footer",{className:"footer"},n.a.createElement("h3",{className:"footer__title"},"Capitals"),n.a.createElement("div",{className:"foooter__capitals"},n.a.createElement(D,{order:1,forecasts:r}),n.a.createElement(D,{order:2,forecasts:c})),n.a.createElement(U,null))},H=a(48),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={capitalsForecasts:null,capitalsError:null},a.loadCapitalsForecasts=a.loadCapitalsForecasts.bind(Object(d.a)(Object(d.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.loadCapitalsForecasts()}},{key:"loadCapitalsForecasts",value:function(){var e=this,t=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.setState({capitalsForecasts:t,capitalsError:a})};g.getForecast(this.props.capitals).then(function(e){e?t(e):t(null,"Capitals forecasts not found")}).catch(function(e){return t(null,"Error: could not load capitals.\n(".concat(e.toString(),")"))})}},{key:"render",value:function(){return n.a.createElement(h.a,null,n.a.createElement("div",{className:"app"},n.a.createElement(E.a,{url:H}),n.a.createElement("div",{className:"app__wrapper"},n.a.createElement(_,null),n.a.createElement("div",{className:"app__main"},n.a.createElement(f.a,{path:"".concat("/challenges-accepted/challenges/weather-forecast/app/build","/city/:city"),render:function(e){var t=e.match;return document.title="".concat(t.params.city," - Weather forecast"),n.a.createElement(x,{city:t.params.city})}}),n.a.createElement(R,null)),this.state.capitalsError&&n.a.createElement(v,{message:this.state.capitalsError}),this.state.capitalsForecasts&&n.a.createElement(B,{forecasts:this.state.capitalsForecasts}))))}}]),t}(n.a.Component);l.a.render(n.a.createElement(P,{capitals:["Bras\xedlia","Amsterdam","London","Dublin","Berlin","Tokyo","Lisbon","Paris","Brussels","Madrid"]}),document.getElementById("root"))}},[[18,2,1]]]);
//# sourceMappingURL=main.5c7397ac.chunk.js.map